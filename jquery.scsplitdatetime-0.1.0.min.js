// scSplitDateTime 0.1.0 | MIT & BSD Licence | http://github.com/stucox
(function($){function pad(n){return parseInt(n,10)<10?'0'+n:n.toString();}
function splitDateString(dateString){var dt=new Date(dateString);if(dt=='Invalid Date'){return['',''];}
var date=pad(dt.getFullYear())+'-'+pad(dt.getMonth()+1)+'-'+pad(dt.getDate()),time=pad(dt.getHours())+':'+pad(dt.getMinutes());return[date,time];}
$.fn.scSplitDateTime=function(){var $datetimes=this;$datetimes.each(function(){var $datetime=$(this).wrap('<span class="scdatetime">'),$container=$datetime.parent(),$date=$datetime.clone().attr('type','date'),$time=$datetime.clone().attr('type','time');$datetime.prop('type','hidden');var valueDateAndTime=splitDateString($datetime.attr('value'));var minDateAndTime=splitDateString($datetime.attr('min'));var maxDateAndTime=splitDateString($datetime.attr('max'));$date.attr('value',valueDateAndTime[0]);$date.attr('min',minDateAndTime[0]);$date.attr('max',maxDateAndTime[0]);$time.attr('value',valueDateAndTime[1]);$time.removeAttr('min');$time.removeAttr('max');$date.removeAttr('name');$time.removeAttr('name');$container.on('change blur','input[type=date], input[type=time]',function(e){var $container=$(e.currentTarget).parent(),$date=$container.children('input[type=date]'),$time=$container.children('input[type=time]'),$datetime=$container.children('input[type=hidden]'),newDate=new Date($date.val()),newTime=new Date('1970-01-01T'+$time.val());if(newDate=='Invalid Date'||newTime=='Invalid Date'){$datetime.removeAttr('value');}
else{$datetime.val(pad(newDate.getFullYear())+'-'+pad(newDate.getMonth()+1)+'-'+pad(newDate.getDate())+' '+pad(newTime.getHours())+':'+pad(newTime.getMinutes()));}});$datetime.parent().appendPolyfill($date).appendPolyfill($time);});};})(jQuery);