// https://github.com/stucox/scSplitDateTime | MIT & BSD Licence
var scSplitDateTime=(function(){var baseOptions={dateType:'date',timeType:'time',dateClassName:'scsplitdatetime-date',timeClassName:'scsplitdatetime-time',parser:function(dateString){return new Date(Date.parse(dateString));}};function pad(n){return parseInt(n,10)<10?'0'+n:n.toString();}
function splitDateString(dateString,parser){var dt=parser(dateString);if(dt=='Invalid Date'){return['',''];}
var date=pad(dt.getFullYear())+'-'+pad(dt.getMonth()+1)+'-'+
pad(dt.getDate()),time=pad(dt.getHours())+':'+pad(dt.getMinutes());return[date,time];}
function wrap(el_,nodeName){var wrapper_=document.createElement(nodeName);el_.parentNode.insertBefore(wrapper_,el_);wrapper_.appendChild(el_);return wrapper_;}
function update(datetime_,date_,time_){var date=new Date(date_.value),time=new Date('1970-01-01T'+time_.value);if(date=='Invalid Date'||time=='Invalid Date'){datetime_.value="";}
else{datetime_.value=pad(date.getFullYear())+'-'+
pad(date.getMonth()+1)+'-'+pad(date.getDate())+' '+pad(time.getHours())+':'+pad(time.getMinutes());}
datetime_.setAttribute('value',datetime_.value);}
function changeInputType(oldObject,oType){var parent=document.createElement('span');parent.innerHTML='<input type="'+oType+'">';var newObject=parent.childNodes[0];for(var prop in oldObject){if(oldObject[prop]&&prop!='type'){try{newObject[prop]=oldObject[prop];}catch(e){}}}
if(oldObject.parentNode){oldObject.parentNode.replaceChild(newObject,oldObject);}
return newObject;}
function resolveOptions(options){var mergedOptions={},attrname=null;for(attrname in baseOptions){mergedOptions[attrname]=baseOptions[attrname];}
for(attrname in options){mergedOptions[attrname]=options[attrname];}
return mergedOptions;}
function init(datetime_,options){options=resolveOptions(options);var container_=wrap(datetime_,'span'),date_=datetime_.cloneNode(false),time_=datetime_.cloneNode(false);container_.className='scsplitdatetime';date_=changeInputType(date_,options.dateType);time_=changeInputType(time_,options.timeType);date_.id=null;time_.id=null;date_.className=options.dateClassName;time_.className=options.timeClassName;datetime_=changeInputType(datetime_,'hidden');var valueDateAndTime=splitDateString(datetime_.value,options.parser);var minDateAndTime=splitDateString(datetime_.min,options.parser);var maxDateAndTime=splitDateString(datetime_.max,options.parser);date_.value=valueDateAndTime[0];date_.min=minDateAndTime[0];date_.max=maxDateAndTime[0];time_.value=valueDateAndTime[1];time_.min="";time_.max="";date_.name="";time_.name="";var events=['change','blur'],updateHandler=function(){update(datetime_,date_,time_);};for(var i in events){if(document.addEventListener){date_.addEventListener(events[i],updateHandler,false);time_.addEventListener(events[i],updateHandler,false);}
else{date_.attachEvent(events[i],updateHandler);time_.attachEvent(events[i],updateHandler);}}
container_.appendChild(date_);container_.appendChild(time_);}
var scSplitDateTime=function(element,options){init(element,options);};scSplitDateTime.setDefaultParser=function(parseFn){baseOptions.parser=parseFn;};return scSplitDateTime;})();